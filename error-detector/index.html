<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error Detector</title>
    <link rel="stylesheet" href="../styles.css" />
</head>

<body>
    <header>
        <h1>Error Detector (helper code)- ECE 3544 Proj 3A</h1>
        <p><strong>PLEASE NOTE:</strong> This code was AI-generated (it was not a requirement for this assignment,
            merely a helpful tool)</p>
    </header>

    <main>
        <section>
            <input type="text" id="input_code" maxlength="7" placeholder="Enter 7-bit code (e.g. 1011011)">
            <button id="checkBtn">Check</button>
            <p id="output_parity"></p>
        </section>
    </main>
    <footer>
        <a href="https://danmurr.github.io/">Home Page</a>
    </footer>
    <script>
        document.getElementById("checkBtn").addEventListener("click", () => {
            const input = document.getElementById("input_code").value.trim();

            // Validate input
            if (!/^[01]{7}$/.test(input)) {
                document.getElementById("output_parity").textContent =
                    "❌ Please enter exactly 7 bits (0s and 1s only)";
                return;
            }

            // Convert string to array of bits, indexed from 1..7 (for clarity)
            var bits = input.split("").map(Number).reverse(); // now bits[0] = b1, bits[6] = b7
            bits.unshift(null); // bits[1] = b1, bits[7] = b7
            const b = bits;
            // Compute parity bits using same pattern as Verilog project:
            // P1 covers bits 1,3,5,7
            // P2 covers bits 2,3,6,7
            // P3 covers bits 4,5,6,7
            const p1 = b[1] ^ b[3] ^ b[5] ^ b[7];
            const p2 = b[2] ^ b[3] ^ b[6] ^ b[7];
            const p3 = b[4] ^ b[5] ^ b[6] ^ b[7];

            const parityBits = `${p3}${p2}${p1}`; // optional order
            document.getElementById("output_parity").textContent =
                `✅ Parity bits: P1=${p1}, P2=${p2}, P3=${p3} → ${parityBits}`;
        });
    </script>
</body>

</html>